<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Quizly â€” Therapy (Ù¾ÛŒØ´Ø±ÙØªÙ‡)</title>
<link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@300;400;600;700&display=swap" rel="stylesheet">
<style>
:root{
  --brand:#fb5180;
  --brand-2:#ff7fa0;
  --bg:#fff6f8;
  --card:#ffffff;
  --muted:#6b6b6b;
  --glass: rgba(255,255,255,0.6);
  --radius:16px;
  --maxw:980px;
  --shadow-1: 0 10px 30px rgba(15,15,15,0.06);
  --accent: 0 14px 40px rgba(251,81,128,0.14);
  --ease: cubic-bezier(.2,.9,.2,1);
  --text: #111;
  --muted-2: #8a8a8a;
}

/* Dark theme variables (applied when html.dark exists) */
html.dark {
  --bg: #0f1114;
  --card: #0f1116;
  --text: #e9e9ea;
  --muted: #bdbdbd;
  --muted-2: #9ea0a3;
  --shadow-1: 0 10px 30px rgba(0,0,0,0.6);
  --accent: 0 14px 40px rgba(251,81,128,0.12);
}

/* Reset */
*{box-sizing:border-box;margin:0;padding:0}
html,body{height:100%}
body{
  font-family:"Vazirmatn",system-ui,-apple-system,"Segoe UI",Roboto,Arial;
  background:
    radial-gradient(900px 420px at 8% 12%, rgba(251,81,128,0.06), transparent 6%),
    radial-gradient(700px 360px at 92% 88%, rgba(255,127,160,0.04), transparent 8%),
    var(--bg);
  color:var(--text);
  -webkit-font-smoothing:antialiased;
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:18px;
  padding:22px 14px;
  transition: background .35s var(--ease), color .35s var(--ease);
}

/* Sticky header with glass effect */
.header {
  position: sticky;
  top:14px;
  width:100%;
  max-width:var(--maxw);
  display:flex;
  align-items:center;
  gap:18px;
  padding:14px;
  border-radius:20px;
  background: linear-gradient(90deg, rgba(255,255,255,0.6), rgba(255,255,255,0.45));
  box-shadow: var(--shadow-1);
  backdrop-filter: blur(8px) saturate(120%);
  z-index:60;
}
html.dark .header{
  background: linear-gradient(90deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
}

/* Logo block with layered shine */
.logo-wrap{
  width:104px;
  height:104px;
  border-radius:18px;
  display:flex;
  align-items:center;
  justify-content:center;
  position:relative;
  overflow:visible;
  background: linear-gradient(180deg, rgba(255,255,255,0.06), rgba(255,255,255,0.02));
  box-shadow: 0 12px 36px rgba(251,81,128,0.08), inset 0 -6px 18px rgba(0,0,0,0.04);
  transition: transform .6s var(--ease), box-shadow .45s;
}
html.dark .logo-wrap{ box-shadow: 0 12px 36px rgba(0,0,0,0.45) }
.logo-wrap:hover{ transform: translateY(-8px) rotate(-3deg) scale(1.04); box-shadow: var(--accent) }
.logo {
  width:76px;
  height:auto;
  border-radius:10px;
  display:block;
  transform-origin:center;
  transition: transform .6s var(--ease), filter .4s;
  box-shadow: 0 12px 30px rgba(0,0,0,0.18);
}
.logo-overlay{
  position:absolute;
  inset:0;
  border-radius:14px;
  pointer-events:none;
  background:
    radial-gradient(60% 40% at 20% 20%, rgba(255,255,255,0.18), transparent 10%),
    linear-gradient(120deg, rgba(251,81,128,0.08), rgba(255,127,160,0.03));
  mix-blend-mode: screen;
  filter: blur(10px);
  opacity:0.95;
  transition: transform .6s, opacity .45s;
}
.logo-reflect{
  position:absolute;
  left:10px;
  bottom:8px;
  width:56%;
  height:16%;
  background:linear-gradient(180deg, rgba(255,255,255,0.45), rgba(255,255,255,0.02));
  transform:skewX(-12deg);
  border-radius:8px;
  opacity:.6;
  filter: blur(6px);
  pointer-events:none;
}

/* Header text */
.header-title h1{ font-size:1.45rem; color:var(--text); font-weight:800 }
.header-title p{ margin-top:6px; color:var(--muted); font-size:0.92rem }

/* Controls */
.controls{
  width:100%;
  max-width:var(--maxw);
  display:flex;
  gap:12px;
  align-items:center;
  justify-content:space-between;
  margin-top:8px;
}
.search{
  flex:1;
  display:flex;
  gap:10px;
  align-items:center;
  background: linear-gradient(180deg, rgba(255,255,255,0.98), rgba(255,255,255,0.95));
  padding:10px;
  border-radius:12px;
  box-shadow: 0 8px 20px rgba(0,0,0,0.04);
  border:1px solid rgba(0,0,0,0.03);
}
html.dark .search{ background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); border:1px solid rgba(255,255,255,0.03) }
.search input{
  border:0; outline:none; background:transparent; font-size:0.98rem; width:100%; color:var(--text);
}
.icon{ width:20px; height:20px; opacity:.75 }

/* Buttons */
.btn{ border:0; cursor:pointer; padding:10px 12px; border-radius:12px; font-weight:700; font-size:0.95rem }
.primary{ background: linear-gradient(90deg,var(--brand),var(--brand-2)); color:#fff; box-shadow: 0 12px 36px rgba(251,81,128,0.14) }
.ghost{ background:transparent; border:1px solid rgba(0,0,0,0.06); color:var(--text) }
html.dark .ghost{ border:1px solid rgba(255,255,255,0.06) }

/* Panel */
.panel{
  width:100%;
  max-width:var(--maxw);
  background: linear-gradient(180deg, rgba(255,255,255,0.96), rgba(255,255,255,0.98));
  border-radius:18px;
  padding:18px;
  box-shadow: 0 18px 40px rgba(12,12,12,0.06);
  max-height:72vh;
  overflow:auto;
  -webkit-overflow-scrolling:touch;
  transition: background .35s var(--ease), box-shadow .35s;
}
html.dark .panel{ background: linear-gradient(180deg, rgba(18,18,22,0.6), rgba(12,12,16,0.6)); box-shadow: 0 18px 40px rgba(0,0,0,0.6) }

/* Scrollbar */
.panel::-webkit-scrollbar{ width:12px }
.panel::-webkit-scrollbar-track{ background:transparent; margin:12px; border-radius:10px }
.panel::-webkit-scrollbar-thumb{
  background: linear-gradient(180deg,var(--brand),var(--brand-2));
  border-radius:10px;
  box-shadow: inset 0 0 0 2px rgba(255,255,255,0.12);
}

/* Grid */
.quiz-list{ display:grid; grid-template-columns:1fr; gap:14px; padding-bottom:8px }

/* Card */
.quiz-card{
  display:flex; align-items:center; justify-content:space-between; gap:12px;
  padding:16px; border-radius:14px;
  background: linear-gradient(180deg, var(--card), rgba(255,255,255,0.98));
  border:1px solid rgba(251,81,128,0.04);
  box-shadow: 0 8px 24px rgba(20,20,20,0.04);
  transform: translateY(12px); opacity:0;
  transition: transform .5s var(--ease), box-shadow .22s, opacity .45s;
}
html.dark .quiz-card{ background: linear-gradient(180deg, rgba(18,18,22,0.6), rgba(12,12,16,0.6)); border:1px solid rgba(255,255,255,0.03) }
.quiz-card.visible{ transform: translateY(0); opacity:1 }
.quiz-card:hover{ transform: translateY(-8px) scale(1.01); box-shadow: 0 26px 60px rgba(20,20,20,0.09) }

.quiz-left{ display:flex; align-items:center; gap:12px }
.badge{
  min-width:64px; height:64px; border-radius:12px; display:flex; align-items:center; justify-content:center;
  color:#fff; font-weight:800; background: linear-gradient(135deg,var(--brand),var(--brand-2));
  box-shadow: 0 12px 36px rgba(251,81,128,0.12); font-size:0.98rem;
}
.quiz-info h3{ font-size:1.02rem; color:var(--text); font-weight:800 }
.quiz-info p{ font-size:0.86rem; color:var(--muted); margin-top:6px; max-width:56ch; white-space:nowrap; overflow:hidden; text-overflow:ellipsis }

/* Actions */
.actions{ display:flex; gap:10px; align-items:center }
.start{ padding:10px 14px; border-radius:12px; color:#fff; background: linear-gradient(90deg,var(--brand),var(--brand-2)); text-decoration:none; font-weight:800; box-shadow: 0 12px 36px rgba(251,81,128,0.14) }
.info{ padding:8px 10px; border-radius:10px; background:transparent; border:1px solid rgba(0,0,0,0.06); color:var(--text); font-weight:700 }
html.dark .info{ border:1px solid rgba(255,255,255,0.06) }

/* Modal */
.modal-backdrop{
  position:fixed; inset:0; background:rgba(0,0,0,0.45); display:flex; align-items:center; justify-content:center; z-index:120;
  opacity:0; pointer-events:none; transition:opacity .22s;
}
.modal-backdrop.show{ opacity:1; pointer-events:auto }
.modal{
  width:calc(100% - 48px); max-width:720px; background:var(--card); border-radius:14px; padding:18px; box-shadow: 0 30px 80px rgba(0,0,0,0.35);
  transform: translateY(18px); transition: transform .28s var(--ease);
}
.modal-backdrop.show .modal{ transform: translateY(0) }

/* To-top */
.to-top{
  position:fixed; right:20px; bottom:20px; z-index:100;
  width:56px; height:56px; border-radius:14px; display:flex; align-items:center; justify-content:center;
  background: linear-gradient(90deg,var(--brand),var(--brand-2)); color:#fff; box-shadow: 0 18px 40px rgba(251,81,128,0.16);
  border:0; cursor:pointer; transform: translateY(20px); opacity:0; transition: transform .28s, opacity .28s;
}
.to-top.show{ transform: translateY(0); opacity:1 }

/* Empty */
.empty{ text-align:center; padding:36px 12px; color:var(--muted) }

/* Focus */
a:focus, button:focus, input:focus{ outline:3px solid rgba(251,81,128,0.12); outline-offset:3px; border-radius:8px }

/* Responsive tweaks */
@media (min-width:900px){
  .quiz-list{ grid-template-columns:1fr }
  .header-title h1{ font-size:1.6rem }
}
</style>
</head>
<body>

<!-- Header -->
<header class="header" role="banner" aria-label="Quizly header">
  <div class="logo-wrap" aria-hidden="false">
    <img class="logo" id="logoImg" src="https://uploadkon.ir/uploads/7e2d29_25Quizly.png" alt="Quizly Logo" loading="lazy">
    <div class="logo-overlay" aria-hidden="true"></div>
    <div class="logo-reflect" aria-hidden="true"></div>
  </div>

  <div class="header-title" aria-hidden="false">
    <h1>Quizly â€” Ù…Ø±Ú©Ø² Ú©ÙˆÛŒÛŒØ² Ùˆ Ø§Ù…ØªØ­Ø§Ù†</h1>
    <h6>Ø³ÙˆÙ„Ø§Øª Ù†Ø¸Ø±ÛŒÙ‡ Ù…Ø´Ø§ÙˆØ±Ù‡ Ùˆ Ø±ÙˆØ§Ù†Ø¯Ø±Ù…Ø§Ù†ÛŒ 1</h6>
    <p>Û²Û° Ú©ÙˆÛŒÛŒØ² Ù…Ø±ØªØ¨ØŒ Ù‚Ø§Ø¨Ù„ Ø¬Ø³ØªØ¬ÙˆØŒ Ø¨Ø§ ØªØ¬Ø±Ø¨Ù‡Ù” Ú©Ø§Ø±Ø¨Ø±ÛŒ Ø­Ø±ÙÙ‡â€ŒØ§ÛŒ</p>
  </div>

  <div style="margin-inline-start:auto; display:flex; gap:8px; align-items:center">
    <button id="themeToggle" class="btn ghost" aria-pressed="false" title="ØªØºÛŒÛŒØ± ØªÙ…">Ø­Ø§Ù„Øª ØªØ§Ø±ÛŒÚ©</button>
  </div>
</header>

<!-- Controls -->
<div class="controls" role="region" aria-label="Ø¬Ø³ØªØ¬Ùˆ Ùˆ ÙÛŒÙ„ØªØ±">
  <div class="search" role="search" aria-label="Ø¬Ø³ØªØ¬ÙˆÛŒ Ú©ÙˆÛŒÛŒØ²">
    <svg class="icon" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M21 21l-4.35-4.35" stroke="#333" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/><circle cx="11" cy="11" r="6" stroke="#333" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/></svg>
    <input id="search" type="search" placeholder="Ø¬Ø³ØªØ¬ÙˆÛŒ Ú©ÙˆÛŒÛŒØ² ÛŒØ§ Ø´Ù…Ø§Ø±Ù‡ (Ú©Ù„ÛŒØ¯ / Ø¨Ø±Ø§ÛŒ ÙÙˆÚ©ÙˆØ³)" aria-label="Ø¬Ø³ØªØ¬ÙˆÛŒ Ú©ÙˆÛŒÛŒØ²">
  </div>

  <div style="display:flex; gap:8px">
    <button id="reset" class="btn ghost" title="Ù†Ù…Ø§ÛŒØ´ Ù‡Ù…Ù‡">Ù†Ù…Ø§ÛŒØ´ Ù‡Ù…Ù‡</button>
    <button id="sort" class="btn ghost" title="Ù…Ø±ØªØ¨â€ŒØ³Ø§Ø²ÛŒ">Ù…Ø±ØªØ¨â€ŒØ³Ø§Ø²ÛŒ</button>
    <button id="shuffle" class="btn primary" title="ØªØ±ØªÛŒØ¨ ØªØµØ§Ø¯ÙÛŒ">ØªØ±ØªÛŒØ¨ ØªØµØ§Ø¯ÙÛŒ</button>
  </div>
</div>

<!-- Panel -->
<main class="panel" id="panel" role="main" aria-live="polite">
  <div id="list" class="quiz-list" role="list" aria-label="ÙÙ‡Ø±Ø³Øª Ú©ÙˆÛŒÛŒØ²Ù‡Ø§"></div>
  <div id="empty" class="empty" hidden>Ù†ØªÛŒØ¬Ù‡â€ŒØ§ÛŒ ÛŒØ§ÙØª Ù†Ø´Ø¯.</div>
</main>

<!-- Modal (Ø¬Ø²Ø¦ÛŒØ§Øª) -->
<div id="modalBackdrop" class="modal-backdrop" role="dialog" aria-modal="true" aria-hidden="true">
  <div class="modal" role="document" aria-labelledby="modalTitle">
    <header style="display:flex;align-items:center;justify-content:space-between;gap:12px">
      <div>
        <h2 id="modalTitle" style="font-size:1.15rem;margin-bottom:6px">Ø¬Ø²Ø¦ÛŒØ§Øª Ú©ÙˆÛŒÛŒØ²</h2>
        <p id="modalSubtitle" style="color:var(--muted);font-size:0.92rem;margin:0">Ø®Ù„Ø§ØµÙ‡ Ùˆ Ø§Ø·Ù„Ø§Ø¹Ø§Øª ØªÚ©Ù…ÛŒÙ„ÛŒ</p>
      </div>
      <div>
        <button id="modalClose" class="btn ghost" aria-label="Ø¨Ø³ØªÙ†">Ø¨Ø³ØªÙ†</button>
      </div>
    </header>
    <hr style="margin:12px 0;border:none;border-top:1px solid rgba(0,0,0,0.06)">
    <section id="modalBody" style="font-size:0.95rem;color:var(--text);line-height:1.6">
      <!-- Ù…Ø­ØªÙˆØ§ Ø¨Ø§ JS Ù¾Ø± Ù…ÛŒâ€ŒØ´ÙˆØ¯ -->
    </section>
    <footer style="display:flex;justify-content:flex-end;margin-top:16px;gap:8px">
      <a id="modalStart" class="start" href="#" role="button">Ø´Ø±ÙˆØ¹ Ø¢Ø²Ù…ÙˆÙ†</a>
    </footer>
  </div>
</div>

<!-- To top -->
<button id="toTop" class="to-top" aria-label="Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ Ø¨Ø§Ù„Ø§" title="Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ Ø¨Ø§Ù„Ø§">â–²</button>

<!-- Footer -->
<footer style="width:100%; max-width:var(--maxw); text-align:center; color:var(--muted); padding:12px 0 40px;">
  Ø¨Ø§ ğŸ’— Quizly
</footer>

<script>
/* Ø¯Ø§Ø¯Ù‡Ù” Ù†Ù…ÙˆÙ†Ù‡ */
const quizzes = Array.from({length:20}, (_,i)=>({
  id: i+1,
  title: `Quiz ${i+1}`,
  desc: `Ø¢Ø²Ù…ÙˆÙ† Ø´Ù…Ø§Ø±Ù‡ ${i+1} â€” Ù…Ø¬Ù…ÙˆØ¹Ù‡â€ŒØ§ÛŒ Ø§Ø² Ø³ÙˆØ§Ù„Ø§Øª Ú†Ù‡Ø§Ø±Ú¯Ø²ÛŒÙ†Ù‡â€ŒØ§ÛŒ Ø¨Ø±Ø§ÛŒ ØªÙ…Ø±ÛŒÙ† Ùˆ Ø§Ø±Ø²ÛŒØ§Ø¨ÛŒ`,
  details: `Ø§ÛŒÙ† Ø¢Ø²Ù…ÙˆÙ† Ø´Ø§Ù…Ù„ 20 Ø³ÙˆØ§Ù„ Ú†Ù‡Ø§Ø±Ú¯Ø²ÛŒÙ†Ù‡â€ŒØ§ÛŒ Ø§Ø³Øª. Ø²Ù…Ø§Ù† Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ÛŒ: 15 Ø¯Ù‚ÛŒÙ‚Ù‡. Ù…Ù†Ø§Ø³Ø¨ Ø¨Ø±Ø§ÛŒ Ù…Ø±ÙˆØ± Ø³Ø±ÛŒØ¹ Ùˆ Ø³Ù†Ø¬Ø´ Ø¯Ø§Ù†Ø´.`,
  href: `quiz${i+1}.html`,
  tags: i%2===0 ? ['Ø±ÙˆØ§Ù†Ø´Ù†Ø§Ø³ÛŒ','ØªÙ…Ø±ÛŒÙ†'] : ['Ø¢Ø²Ù…ÙˆÙ†','Ø³Ø±ÛŒØ¹']
}));

/* Ø§Ù„Ù…Ø§Ù†â€ŒÙ‡Ø§ */
const listEl = document.getElementById('list');
const emptyEl = document.getElementById('empty');
const searchInput = document.getElementById('search');
const resetBtn = document.getElementById('reset');
const shuffleBtn = document.getElementById('shuffle');
const sortBtn = document.getElementById('sort');
const panel = document.getElementById('panel');
const toTopBtn = document.getElementById('toTop');
const modalBackdrop = document.getElementById('modalBackdrop');
const modalBody = document.getElementById('modalBody');
const modalTitle = document.getElementById('modalTitle');
const modalSubtitle = document.getElementById('modalSubtitle');
const modalClose = document.getElementById('modalClose');
const modalStart = document.getElementById('modalStart');
const themeToggle = document.getElementById('themeToggle');

let current = [...quizzes];
let sortAsc = true;

/* Ø§Ù…Ù†â€ŒØ³Ø§Ø²ÛŒ Ù…ØªÙ† */
function escapeHtml(s){ return String(s).replace(/[&<>"']/g, m=>({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m])); }

/* Ø³Ø§Ø®Øª Ú©Ø§Ø±Øª */
function makeCard(q, idx){
  const card = document.createElement('article');
  card.className = 'quiz-card';
  card.setAttribute('role','listitem');
  card.innerHTML = `
    <div class="quiz-left">
      <div class="badge" aria-hidden="true">Q${q.id}</div>
      <div class="quiz-info">
        <h3>${escapeHtml(q.title)}</h3>
        <p title="${escapeHtml(q.desc)}">${escapeHtml(q.desc)}</p>
      </div>
    </div>
    <div class="actions">
      <a class="start" href="${encodeURI(q.href)}" aria-label="Ø´Ø±ÙˆØ¹ ${escapeHtml(q.title)}">Ø´Ø±ÙˆØ¹</a>
      <button class="info" type="button" data-id="${q.id}" aria-label="Ø¬Ø²Ø¦ÛŒØ§Øª ${escapeHtml(q.title)}">Ø¬Ø²Ø¦ÛŒØ§Øª</button>
    </div>
  `;
  // Ø§Ù†ÛŒÙ…ÛŒØ´Ù† ÙˆØ±ÙˆØ¯ Ø¨Ø§ ØªØ§Ø®ÛŒØ±
  setTimeout(()=>card.classList.add('visible'), 30 * idx);
  return card;
}

/* Ø±Ù†Ø¯Ø± */
function render(list){
  listEl.innerHTML = '';
  if(!list.length){ emptyEl.hidden = false; return; }
  emptyEl.hidden = true;
  const frag = document.createDocumentFragment();
  list.forEach((q, idx)=>frag.appendChild(makeCard(q, idx)));
  listEl.appendChild(frag);
}

/* Ø¬Ø³ØªØ¬Ùˆ Ø¨Ø§ debounce */
function debounce(fn, wait=180){
  let t;
  return (...args)=>{ clearTimeout(t); t = setTimeout(()=>fn(...args), wait); };
}
function doSearch(q){
  const term = q.trim().toLowerCase();
  if(!term){ current = [...quizzes]; render(current); return; }
  const filtered = quizzes.filter(it=>{
    return it.title.toLowerCase().includes(term) || it.desc.toLowerCase().includes(term) || it.tags.join(' ').toLowerCase().includes(term) || String(it.id)===term;
  });
  current = filtered;
  render(filtered);
}
const debounced = debounce(doSearch, 180);
searchInput.addEventListener('input', e=>debounced(e.target.value));

/* Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ */
resetBtn.addEventListener('click', ()=>{
  searchInput.value = '';
  current = [...quizzes];
  render(current);
  searchInput.focus();
});
shuffleBtn.addEventListener('click', ()=>{
  current = shuffleArray(current.length ? current : quizzes);
  render(current);
});
sortBtn.addEventListener('click', ()=>{
  sortAsc = !sortAsc;
  current.sort((a,b)=> sortAsc ? a.id - b.id : b.id - a.id);
  render(current);
});

/* shuffle */
function shuffleArray(arr){
  const a = [...arr];
  for(let i=a.length-1;i>0;i--){
    const j = Math.floor(Math.random()*(i+1));
    [a[i],a[j]] = [a[j],a[i]];
  }
  return a;
}

/* to-top visibility */
panel.addEventListener('scroll', ()=>{
  if(panel.scrollTop > 220) toTopBtn.classList.add('show'); else toTopBtn.classList.remove('show');
});
toTopBtn.addEventListener('click', ()=>{ panel.scrollTo({top:0, behavior:'smooth'}); });

/* keyboard shortcut for search */
document.addEventListener('keydown', (e)=>{
  if(e.key === '/' && document.activeElement !== searchInput){
    e.preventDefault();
    searchInput.focus();
  }
});

/* modal handling (delegation) */
listEl.addEventListener('click', (e)=>{
  if(e.target.matches('.info')){
    const id = Number(e.target.dataset.id);
    const q = quizzes.find(x=>x.id===id);
    if(!q) return;
    openModal(q);
  }
});
modalClose.addEventListener('click', closeModal);
modalBackdrop.addEventListener('click', (e)=>{ if(e.target===modalBackdrop) closeModal(); });
document.addEventListener('keydown', (e)=>{ if(e.key==='Escape') closeModal(); });

function openModal(q){
  modalTitle.textContent = q.title;
  modalSubtitle.textContent = `Ú©Ø¯ Ø¢Ø²Ù…ÙˆÙ†: ${q.id} â€¢ Ø¨Ø±Ú†Ø³Ø¨â€ŒÙ‡Ø§: ${q.tags.join('ØŒ ')}`;
  modalBody.innerHTML = `<p style="margin:0 0 8px">${escapeHtml(q.details)}</p>
    <ul style="margin:8px 0 0;padding-inline-start:18px;color:var(--muted)">
      <li>ØªØ¹Ø¯Ø§Ø¯ Ø³ÙˆØ§Ù„: 20</li>
      <li>Ø²Ù…Ø§Ù† Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ÛŒ: 15 Ø¯Ù‚ÛŒÙ‚Ù‡</li>
      <li>Ù†ÙˆØ¹: Ú†Ù‡Ø§Ø±Ú¯Ø²ÛŒÙ†Ù‡â€ŒØ§ÛŒ</li>
    </ul>`;
  modalStart.href = q.href;
  modalBackdrop.classList.add('show');
  modalBackdrop.setAttribute('aria-hidden','false');
  modalClose.focus();
}
function closeModal(){
  modalBackdrop.classList.remove('show');
  modalBackdrop.setAttribute('aria-hidden','true');
}

/* theme handling: toggle, persist, init from system */
function setTheme(isDark){
  if(isDark) document.documentElement.classList.add('dark');
  else document.documentElement.classList.remove('dark');
  themeToggle.setAttribute('aria-pressed', String(isDark));
  themeToggle.textContent = isDark ? 'Ø­Ø§Ù„Øª Ø±ÙˆØ´Ù†' : 'Ø­Ø§Ù„Øª ØªØ§Ø±ÛŒÚ©';
  try{ localStorage.setItem('quizly_theme_dark', isDark ? '1' : '0'); }catch(e){}
}
themeToggle.addEventListener('click', ()=>{
  const isDark = !document.documentElement.classList.contains('dark');
  setTheme(isDark);
});

/* initialize theme: prefer saved, else system preference */
(function initTheme(){
  try{
    const saved = localStorage.getItem('quizly_theme_dark');
    if(saved === '1'){ setTheme(true); return; }
    if(saved === '0'){ setTheme(false); return; }
  }catch(e){}
  const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
  setTheme(prefersDark);
})();

/* accessibility: info button Enter key */
listEl.addEventListener('keydown', (e)=>{
  if(e.key==='Enter' && e.target.matches('.info')) e.target.click();
});

/* initial render */
render(quizzes);

/* preserve scroll */
if(sessionStorage.getItem('panelScroll')) panel.scrollTop = Number(sessionStorage.getItem('panelScroll'));
panel.addEventListener('scroll', ()=> sessionStorage.setItem('panelScroll', String(panel.scrollTop)));
</script>
</body>
</html>
